<!DOCTYPE html>
<html>
<head>
<script type="module" src="src/index_indoor.js"></script>
<script src="//cdn.jsdelivr.net/npm/eruda"></script>
<script>eruda.init();</script>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1" />
<title>å®¤å…§ AR - æ­¥æ•¸è¿½è¹¤</title>
<link rel="stylesheet" href="src/style.css">
<style>
    /* é¡å¤–çš„å®¤å…§æ¨¡å¼æ¨£å¼ */
    #info-panel {
        max-height: 60vh;
        overflow-y: auto;
    }
    
    .step-info {
        background: rgba(0, 150, 255, 0.2);
        border-left: 3px solid #0096ff;
        padding: 8px;
        margin-top: 10px;
        border-radius: 4px;
    }
    
    #reset-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 15px 25px;
        background: #ff4444;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1000;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    
    #reset-btn:active {
        transform: scale(0.95);
    }
    
</style>
</head>
<body>
<main>

<!-- è³‡è¨Šé¢æ¿ -->
<div id="info-panel">
    <div class="info-title">ğŸ“ ä½ç½®è³‡è¨Š</div>
    <div class="info-item">
        <span class="info-label">X åº§æ¨™:</span>
        <span class="info-value" id="lon-value">0.00 m</span>
    </div>
    <div class="info-item">
        <span class="info-label">Z åº§æ¨™:</span>
        <span class="info-value" id="lat-value">0.00 m</span>
    </div>
    <div class="info-item">
        <span class="info-label">æ­¥æ•¸:</span>
        <span class="info-value" id="grid-point">0</span>
    </div>
    <div class="step-info">
        <div style="font-size: 11px; color: #aaa; margin-bottom: 4px;">ğŸ’¡ æç¤º</div>
        <div style="font-size: 12px;">é–‹å§‹èµ°å‹•ä»¥è¿½è¹¤ä½ç½®<br>è¨Šè™Ÿåœ“åœˆæœƒå‡ºç¾åœ¨å›ºå®šä½ç½®</div>
    </div>
    <div id="grid-status">è¨Šè™Ÿé»æ•¸é‡: <span id="grid-count">0</span></div>
    
    <!-- è¨­å®šé¢æ¿ -->
    <div id="settings-panel" style="margin-top: 15px; padding: 12px; background: rgba(100, 200, 255, 0.1); border-radius: 6px; border: 1px solid rgba(0, 150, 255, 0.3);">
        <div class="info-title" style="font-size: 13px; margin-bottom: 10px;">âš™ï¸ åµæ¸¬å™¨è¨­å®š</div>
        
        <label style="display: block; margin-bottom: 10px; font-size: 12px;">
            æ¿¾æ³¢å™¨ Î± å€¼: 
            <input type="range" id="filter-alpha" min="0.1" max="1.0" step="0.1" value="0.3" style="width: 80%; vertical-align: middle;">
            <span id="filter-alpha-value" style="display: inline-block; width: 30px; text-align: right;">0.3</span>
        </label>
        
        <label style="display: block; margin-bottom: 5px; font-size: 12px;">
            éˆæ•åº¦: 
            <select id="sensitivity" style="width: 60px; padding: 4px;">
                <option value="low">ä½</option>
                <option value="medium" selected>ä¸­</option>
                <option value="high">é«˜</option>
            </select>
        </label>
        <div style="font-size: 10px; color: #aaa; margin-top: 6px;">ğŸ’¡ Î± è¶Šå°è¶Šå¹³æ»‘ï¼Œéˆæ•åº¦é«˜æœƒæ›´å®¹æ˜“åµæ¸¬æ­¥ä¼</div>
    </div>
</div>

<!-- è¨Šè™Ÿé»åˆ—è¡¨ (å·²éš±è—) -->
<div id="base-stations" style="display: none;">
    <div class="info-title">ğŸ“¡ è¨Šè™Ÿé»ä½ç½®</div>
    <div class="station-item">
        <div class="station-name">è¨Šè™Ÿé» A</div>
        <div class="station-coords">æ­£å‰æ–¹ 5m (å¼·)</div>
    </div>
    <div class="station-item">
        <div class="station-name">è¨Šè™Ÿé» B</div>
        <div class="station-coords">å³å‰æ–¹ 5m (ä¸­)</div>
    </div>
    <div class="station-item">
        <div class="station-name">è¨Šè™Ÿé» C</div>
        <div class="station-coords">å·¦å‰æ–¹ 3m (è¼ƒå¼·)</div>
    </div>
    <div class="station-item">
        <div class="station-name">è¨Šè™Ÿé» D</div>
        <div class="station-coords">é å‰æ–¹ 10m (å¼±)</div>
    </div>
    <div class="station-item">
        <div class="station-name">è¨Šè™Ÿé» E</div>
        <div class="station-coords">å³å´ 5m (ä¸­)</div>
    </div>
    <div class="station-item">
        <div class="station-name">è¨Šè™Ÿé» F</div>
        <div class="station-coords">å·¦å´ 5m (è¼ƒä¸­)</div>
    </div>
    
    <div class="signal-legend">
        <div class="legend-item">
            <div class="color-box color-strong"></div>
            <span>å¼· (90+)</span>
        </div>
        <div class="legend-item">
            <div class="color-box color-high"></div>
            <span>è¼ƒå¼· (70-89)</span>
        </div>
        <div class="legend-item">
            <div class="color-box color-medium"></div>
            <span>ä¸­ (50-69)</span>
        </div>
        <div class="legend-item">
            <div class="color-box color-orange"></div>
            <span>è¼ƒå¼± (30-49)</span>
        </div>
        <div class="legend-item">
            <div class="color-box color-weak"></div>
            <span>å¼± (10-29)</span>
        </div>
        <div class="legend-item">
            <div class="color-box color-none"></div>
            <span>ç„¡ (&lt;10)</span>
        </div>
    </div>
</div>

<!-- å‡ä½ç½®è¼¸å…¥ (æ”¹ç‚ºé‡è¨­æŒ‰éˆ•) -->
<div id="gpsinput" style="display: none;">
    <div><input id="fakeLon" placeholder="X åº§æ¨™ (å…¬å°º)" value="0"/></div>
    <div><input id="fakeLat" placeholder="Z åº§æ¨™ (å…¬å°º)" value="0"/></div>
    <div><button id="setFakeLoc">é‡è¨­åˆ°åŸé»</button></div>
</div>

<!-- å¿«é€Ÿé‡è¨­æŒ‰éˆ• -->
<button id="reset-btn" onclick="document.getElementById('setFakeLoc').click()">
    ğŸ”„ é‡è¨­åŸé»
</button>

<!-- Three.js Canvas -->
<canvas id="glscene"></canvas>

</main>

<script>
    // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–æç¤º
    window.addEventListener('load', () => {
        console.log("âœ… å®¤å…§ AR é é¢å·²è¼‰å…¥ï¼ŒJS æ¨¡çµ„æ­£åœ¨åˆå§‹åŒ–...");
    });
</script>

</body>
</html>
